<Page navigatingTo="onNavigatingTo">
  <ActionBar title="Prendre un rendez-vous" />
  
  <ScrollView>
    <StackLayout padding="20">
      <!-- Sélection du service -->
      <Label text="Service" class="label" />
      <ListView items="{{ services }}" selectedIndex="{{ selectedServiceIndex }}"
                height="200" class="list">
        <ListView.itemTemplate>
          <StackLayout padding="10">
            <Label text="{{ name }}" class="service-name" />
            <Label text="{{ duration + ' min - ' + price + '€' }}" class="service-details" />
          </StackLayout>
        </ListView.itemTemplate>
      </ListView>

      <!-- Sélection de la date -->
      <Label text="Date" class="label" marginTop="20" />
      <DatePicker date="{{ selectedDate }}" minDate="{{ minDate }}"
                  maxDate="{{ maxDate }}" />

      <!-- Sélection de l'heure -->
      <Label text="Heure" class="label" marginTop="20" />
      <WrapLayout>
        <Repeater items="{{ availableSlots }}">
          <Repeater.itemTemplate>
            <Button text="{{ . }}" tap="{{ $parent.onTimeSelect }}"
                    class="{{ isSelected ? 'time-slot-selected' : 'time-slot' }}"
                    margin="5" />
          </Repeater.itemTemplate>
        </WrapLayout>
      </WrapLayout>

      <Button text="Confirmer le rendez-vous" tap="{{ onBookAppointment }}"
              class="btn" isEnabled="{{ canBook }}" marginTop="20" />

      <ActivityIndicator busy="{{ isLoading }}" />
    </StackLayout>
  </ScrollView>
</Page>